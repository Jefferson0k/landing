<script setup>
import { computed } from 'vue';
import { usePage } from '@inertiajs/vue3';
import AppMenuItem from './AppMenuItem.vue';
import Avatar from 'primevue/avatar';
import Button from 'primevue/button';
import OverlayBadge from 'primevue/overlaybadge';

const page = usePage();

// Acceder a permisos del usuario
const permissions = computed(() => page.props.auth.user?.permissions ?? []);
const hasPermission = (perm) => permissions.value.includes(perm);

// Estructura del menú con iconos de PrimeIcons
const model = computed(() => [
    {
        items: [
            { label: 'Mi billetera', icon: 'pi pi-wallet', to: '/dashboard' },
            { label: 'Buscamos oportunidades', icon: 'pi pi-search-plus', to: '/Buscar/Oportunidades' },
            { label: 'Mi dashboard', icon: 'pi pi-chart-line', to: '/dashboard2' },
            {
                label: 'Información Bancaria', icon: 'pi pi-building',
                items: [
                    { label: 'Cuentas', icon: 'pi pi-list', to: '/auth/login' },
                    { label: 'Estado de cuentas', icon: 'pi pi-file-pdf', to: '/auth/error' }
                ]
            },
            { label: 'Mis datos personales', icon: 'pi pi-user-edit', to: '/dashboard3' },
        ]
    }
].filter(section => section.items.length > 0));
</script>

<template>
    <div class="flex flex-col h-full border-r border-gray-300 pr-4">
        <!-- Perfil del usuario -->
        <div class="flex flex-col items-center justify-center text-center mb-8 mt-4">
            <!-- Contenedor SVG con fondo y overlay -->
            <div class="relative w-[135px] h-[135px]">
                <!-- SVG de fondo -->
                <svg xmlns="http://www.w3.org/2000/svg" width="135" height="135" viewBox="0 0 135 135" fill="none">
                    <path
                        d="M34.2105 0H100.789C119.605 0 135 15.3947 135 34.2105V100.789C135 119.605 119.605 135 100.789 135H34.2105C15.3947 135 0 119.605 0 100.789V34.2105C0 15.3947 15.3947 0 34.2105 0Z"
                        fill="#EFEBE4" />
                </svg>
                <svg class="absolute top-4 left-0" xmlns="http://www.w3.org/2000/svg" width="160" height="125"
                    viewBox="0 0 135 135" fill="none">
                    <path
                        d="M111.385 117.953L59.1933 127.328L0.71875 117.953C0.71875 117.953 3.32836 91.2766 15.3132 82.6746C15.8931 82.288 16.5697 81.8047 17.1496 81.4181C29.1345 73.6859 46.1453 70.6897 46.1453 70.6897L70.5983 71.7529C70.5983 71.7529 82.5831 73.9759 92.345 79.6784C93.3115 80.2583 94.278 80.8382 95.2446 81.5147C105.393 88.667 111.385 117.953 111.385 117.953Z"
                        fill="#FF4722" />
                    <path
                        d="M50.8809 57.0622C50.8809 57.0622 50.2043 67.5006 44.8885 62.9579C40.9257 59.6718 43.9219 56.8689 39.8626 53.1961C38.2195 51.7463 33.2902 49.04 34.6433 43.7242C35.9965 38.4083 39.476 37.925 37.1563 35.5087C34.8366 33.0924 30.8739 27.1 38.1228 21.6875C45.3717 16.1783 38.0262 9.99255 47.2081 7.09298C56.3901 4.19342 60.3528 7.96285 67.8917 4.09676C75.5272 0.32733 82.5828 -0.929148 87.5121 2.26037C94.2777 6.51307 87.2221 21.0109 81.6163 21.3975C76.1071 21.7841 50.8809 57.0622 50.8809 57.0622Z"
                        fill="#101010" />
                    <path
                        d="M70.8875 65.5671L70.5975 71.7529C69.8243 72.3328 69.0511 72.816 68.3745 73.2027C57.3562 79.1951 46.1445 70.6897 46.1445 70.6897L47.0144 49.2329L67.9879 63.5374L70.8875 65.5671Z"
                        fill="#F1B19B" />
                    <path
                        d="M70.8875 65.5671L70.5976 71.7528C69.8243 72.3327 69.0511 72.816 68.3746 73.2026C59.3859 69.2399 53.1035 59.3813 53.1035 59.3813L67.988 63.7307L70.8875 65.5671Z"
                        fill="#CB7E61" />
                    <path
                        d="M79.7812 38.6015C79.7812 38.6015 83.454 34.6388 85.2904 38.7949C87.1268 43.0475 85.1938 51.3596 79.9746 49.7165L79.7812 38.6015Z"
                        fill="#F1B19B" />
                    <path
                        d="M83.7426 19.3675C83.7426 19.3675 87.802 21.0106 85.7723 25.5532C83.8392 30.0959 83.9359 31.0624 84.5158 33.962C84.9991 36.8615 82.6794 38.9879 81.8095 38.6979C81.0363 38.408 74.0774 17.0478 83.7426 19.3675Z"
                        fill="#101010" />
                    <path
                        d="M82.8722 53.2925C82.8722 53.2925 82.389 66.0506 69.051 65.4707C55.9063 64.8908 47.3042 54.0657 46.821 53.5825V50.8762L46.6277 36.9583L46.531 29.5161C46.531 29.5161 45.3712 16.0814 58.2259 14.1484C67.6012 12.7952 76.2999 14.6316 80.4559 19.7542C80.5526 19.9475 80.7459 20.0442 80.8425 20.2375C82.1957 21.9772 82.9689 24.1035 83.0655 26.6165V39.8578V43.144L82.8722 53.2925Z"
                        fill="#F1B19B" />
                    <path
                        d="M72.8218 50.1996C72.2418 50.1996 71.5653 50.1996 70.8887 50.0063C67.1193 49.2331 64.6063 45.8502 64.5097 45.6569C64.3164 45.4636 64.413 45.1737 64.6063 44.9804C64.7996 44.7871 65.0896 44.8837 65.2829 45.077C65.2829 45.077 67.6992 48.2665 71.082 49.0398C74.4648 49.813 75.9146 47.7833 75.9146 47.7833C76.1079 47.59 76.3979 47.4933 76.5912 47.6866C76.7845 47.8799 76.8811 48.1699 76.6878 48.3632C76.6878 48.4598 75.528 50.1029 72.8218 50.1996Z"
                        fill="#101010" />
                    <path
                        d="M73.4034 53.0987C73.6934 53.0021 73.7901 52.8088 73.7901 52.8088C74.08 52.6155 74.1767 52.2289 73.9834 51.9389C73.7901 51.6489 73.4034 51.5523 73.1135 51.7456C73.0168 51.8422 71.0838 53.0987 68.9574 52.0355C68.6675 51.8422 68.2809 52.0355 68.0876 52.3255C67.8943 52.6155 68.0876 53.0021 68.3775 53.1954C70.5039 54.3552 72.5336 53.582 73.4034 53.0987Z"
                        fill="#F1B19B" />
                    <path
                        d="M73.9825 44.2068C72.8227 44.0135 71.4696 43.5302 70.793 43.2403C70.503 43.1436 70.4064 42.8537 70.503 42.5637C70.5997 42.2738 70.8896 42.1771 71.1796 42.2738C73.1126 43.047 75.3357 43.5302 75.6256 43.1436C75.6256 43.1436 75.6256 43.1436 75.6256 43.047C74.6591 38.601 72.3394 38.1177 72.3394 38.1177C72.0495 38.0211 71.9528 37.8278 71.9528 37.6344L72.0495 33.5751C72.0495 33.2851 72.3394 33.0918 72.6294 33.0918C72.9193 33.0918 73.1126 33.3818 73.1126 33.6717L72.9193 37.1512C73.7892 37.5378 75.7223 38.7943 76.5921 42.757C76.7854 43.4336 76.4955 43.7235 76.3022 43.9168C75.8189 44.3034 74.949 44.3034 73.9825 44.2068Z"
                        fill="#101010" />
                    <path
                        d="M58.1309 25.7465C58.3242 27.3896 59.8706 28.5494 61.417 28.3561C62.3836 28.2595 63.4467 28.1628 64.6066 28.2595C66.153 28.3561 67.6028 27.1963 67.6028 25.5532C67.6028 25.6498 61.8036 23.2335 58.1309 25.7465Z"
                        fill="#101010" />
                    <path
                        d="M82.0013 27.2928C81.808 28.8392 80.3582 29.9991 78.7151 29.8058C77.7486 29.7091 76.6854 29.6124 75.6222 29.7091C74.0758 29.8058 72.8193 28.5493 72.7227 27.0028C72.8193 27.0028 78.4251 24.7798 82.0013 27.2928Z"
                        fill="#101010" />
                    <path
                        d="M80.9393 20.1403C78.9096 19.2704 77.3632 19.947 74.077 21.2035C69.3411 23.0398 64.1218 21.0102 59.5792 18.4005C55.0365 15.8876 52.137 19.0771 53.5868 21.3001C55.0365 23.5231 54.8432 25.2628 53.0069 27.9691C51.1705 30.6754 56.1964 32.1252 53.2968 34.1548C52.0403 35.0247 52.137 36.3778 52.5236 37.6343C53.0069 39.0841 51.7504 40.4372 50.3006 40.0506C48.8508 39.5674 46.8211 36.8611 46.8211 36.8611L42.7617 27.2925C42.7617 27.2925 46.3378 14.2445 59.0959 12.3115C68.4712 10.9583 77.1699 12.7947 81.3259 17.9173C81.4226 18.1106 80.8427 19.947 80.9393 20.1403Z"
                        fill="#101010" />
                    <path
                        d="M64.4122 35.6053C64.3156 36.8618 63.7356 37.925 63.0591 37.8283C62.3825 37.8283 61.8026 36.7651 61.8992 35.5087C61.9959 34.2522 62.5758 33.189 63.2524 33.2857C63.9289 33.2857 64.4122 34.3488 64.4122 35.6053Z"
                        fill="#101010" />
                    <path
                        d="M77.0743 35.8953C76.9777 37.1518 76.3978 38.215 75.7212 38.1183C75.0446 38.1183 74.4647 37.0552 74.5614 35.7987C74.658 34.5422 75.2379 33.479 75.9145 33.5757C76.5911 33.5757 77.0743 34.6389 77.0743 35.8953Z"
                        fill="#101010" />
                    <path
                        d="M51.2666 48.5571C51.1699 48.6538 49.3335 52.5199 46.9172 53.583V50.8768C46.8206 50.8768 48.9469 50.5868 51.2666 48.5571Z"
                        fill="#101010" />
                    <path
                        d="M49.2397 39.6642C49.2397 39.6642 44.4071 32.6086 40.4444 37.8278C37.1582 42.1772 42.4741 53.9687 48.7565 50.296L49.2397 39.6642Z"
                        fill="#F1B19B" />
                    <path
                        d="M48.272 48.073C48.6586 48.073 48.8519 47.7831 48.8519 47.4931C48.4653 41.5974 43.6327 39.3744 43.4394 39.2777C43.1494 39.181 42.8595 39.2777 42.7628 39.5677C42.6662 39.8576 42.7628 40.1476 43.0528 40.2442C43.2461 40.3409 47.4988 42.2739 47.8854 47.4931C47.7887 47.8797 47.982 48.073 48.272 48.073Z"
                        fill="#CB7E61" />
                    <path
                        d="M43.4402 44.6908C43.5368 44.6908 43.6335 44.6908 43.7301 44.5941C44.2134 44.2075 45.6632 43.4343 46.5331 43.6276C46.823 43.7242 47.113 43.5309 47.2096 43.241C47.3063 42.951 47.113 42.6611 46.823 42.5644C45.2766 42.0811 43.3435 43.5309 43.0536 43.6276C42.8603 43.8209 42.7636 44.1108 42.9569 44.4008C43.1502 44.6908 43.3435 44.6908 43.4402 44.6908Z"
                        fill="#CB7E61" />
                    <path
                        d="M46.3361 66.7275C46.3361 66.7275 50.1055 73.4932 61.2205 75.3296L53.7783 84.8015L39.957 72.1401L46.3361 66.7275Z"
                        fill="white" />
                    <path
                        d="M70.789 67.3071C70.789 67.3071 71.0789 72.333 63.6367 75.4259L70.789 83.3514L76.4915 73.2996L70.789 67.3071Z"
                        fill="white" />
                    <path
                        d="M32.613 117.953H0.621094C0.621094 117.953 3.2307 91.2767 15.2156 82.6747C15.7955 82.2881 16.472 81.8048 17.052 81.4182C21.498 85.2843 33.4828 97.8491 32.613 117.953Z"
                        fill="#FF4722" />
                    <path
                        d="M100.074 117.953C100.461 100.265 95.338 86.1542 92.3418 79.6785C93.3083 80.2584 94.2748 80.8383 95.2414 81.5149C105.39 88.6671 111.382 117.953 111.382 117.953H100.074Z"
                        fill="#FF4722" />
                </svg>
            </div>
            <br>
            <div class="text-xl font-bold mb-3">{{ page.props.auth.user.name }}</div>
            <div class="text-lg font-semibold">1234567890</div>
        </div>

        <!-- Menú lateral -->
        <ul class="layout-menu">
            <template v-for="(item, i) in model" :key="i">
                <app-menu-item :item="item" :index="i" />
            </template>
        </ul>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <!-- Aki va aki el diseño de la imagen--->
        <div class="flex items-center justify-center min-h-screen">
            <div
                class="bg-[#FF4929] rounded-2xl shadow-lg text-center w-full max-w-md flex flex-col items-center">
                <h2 class="text-3xl font-bold mb-2">zuma</h2>
                <h5 class="text-3xl font-semibold mb-2">¿Tienes alguna duda?</h5>
                <p class="mb-6">Tenemos especialistas que te podrían ayudar</p>
                <Button label="Contactar especialista" severity="contrast" variant="outlined" rounded/>
                <div class="w-36">

                    <svg xmlns="http://www.w3.org/2000/svg" width="100" height="178" viewBox="0 0 155 178" fill="none">
                        <g clip-path="url(#clip0_2599_15296)">
                            <path
                                d="M13.5156 106.657C11.1212 88.9386 23.5722 72.6034 41.2909 70.2089C59.0096 67.8145 75.3449 80.2655 77.7393 97.9842C80.1337 115.703 67.6827 132.038 49.964 134.433C32.2453 136.827 15.91 124.376 13.5156 106.657Z"
                                stroke="black" stroke-width="8.17668" stroke-miterlimit="10" />
                            <path
                                d="M54.0621 99.6869C55.7116 100.113 57.095 100.911 58.2124 102.028C59.3298 103.199 60.0747 104.848 60.3408 106.977C60.7133 109.743 60.0747 112.191 58.372 114.426C56.6693 116.607 54.2749 118.151 51.1888 119.055L51.8805 124.163L45.8678 124.961L45.1761 119.747C41.8771 119.64 39.1635 118.683 36.9287 116.927C34.6939 115.171 33.3636 112.883 32.938 110.01L40.068 109.158C40.4405 110.808 41.2918 112.085 42.6753 112.936C44.0587 113.787 45.7614 114.053 47.8366 113.787C49.5393 113.575 50.9227 112.989 51.8805 112.138C52.8915 111.287 53.2639 110.169 53.1043 108.892C52.9979 107.988 52.5722 107.296 51.9337 106.87C51.242 106.391 50.3374 106.125 49.22 105.966C48.1026 105.806 46.3467 105.646 44.0587 105.487C41.7707 105.38 39.802 105.061 38.2057 104.635C36.6094 104.156 35.226 103.358 34.1086 102.188C32.9912 101.017 32.2463 99.3144 31.9802 97.1329C31.6077 94.5256 32.2463 92.1844 33.8425 90.1092C35.4388 88.0341 37.6736 86.5442 40.6001 85.6928L39.9084 80.5315L45.9211 79.7334L46.6128 85.0011C49.5925 85.1607 52.1466 86.0653 54.2217 87.6616C56.2969 89.3111 57.5207 91.4395 57.9464 94.0467L50.8163 95.0045C50.4439 93.5678 49.6989 92.5036 48.4751 91.7587C47.3045 91.0138 45.8146 90.7477 44.0587 91.0138C42.4624 91.2266 41.1854 91.7587 40.3341 92.5568C39.4295 93.355 39.1103 94.4192 39.2699 95.643C39.3763 96.5476 39.802 97.2393 40.4405 97.665C41.079 98.0906 41.9836 98.3567 43.101 98.5695C44.2184 98.7291 45.9211 98.8888 48.2091 98.9952C50.4439 98.9952 52.4126 99.2612 54.0621 99.6869Z"
                                fill="black" />
                            <path
                                d="M5.37462 29.1846C9.73779 11.8384 27.3501 1.24973 44.6963 5.6129C62.0426 9.97607 72.6312 27.5884 68.2681 44.9346C63.9049 62.2809 46.2926 72.8695 28.9464 68.5064C11.6001 64.1432 1.01145 46.5309 5.37462 29.1846Z"
                                stroke="black" stroke-width="8.17668" stroke-miterlimit="10" />
                            <path
                                d="M45.6018 37.7515C46.9853 38.7625 47.9431 39.9863 48.5816 41.4762C49.2201 42.9661 49.2733 44.722 48.7412 46.8503C48.0495 49.564 46.5064 51.586 44.112 53.0226C41.7176 54.4593 38.9507 54.9914 35.7581 54.6721L34.4811 59.6738L28.5748 58.1839L29.8519 53.0758C26.8721 51.7456 24.6374 49.8833 23.2007 47.3824C21.7641 44.9348 21.3916 42.2743 22.0833 39.5074L29.0537 41.3698C28.7877 43.0725 29.1069 44.5623 30.0647 45.8394C31.0225 47.1696 32.5123 48.0742 34.5875 48.553C36.2902 48.9787 37.7269 48.9787 38.9507 48.4998C40.1745 48.0742 40.9726 47.1696 41.2919 45.9458C41.5047 45.0412 41.3983 44.2963 40.9194 43.6046C40.4405 42.9128 39.7488 42.3275 38.7378 41.7422C37.7269 41.1569 36.1838 40.412 34.1086 39.401C32.0335 38.4433 30.3308 37.4323 29.0005 36.4213C27.6703 35.4103 26.7125 34.1333 26.074 32.5902C25.4355 31.0472 25.4355 29.238 25.9676 27.1097C26.6061 24.5556 28.0428 22.6401 30.2775 21.2566C32.5123 19.8732 35.1728 19.3411 38.2057 19.6604L39.4828 14.6055L45.389 16.0953L44.112 21.2566C46.8257 22.5337 48.8476 24.2896 50.1778 26.5776C51.5081 28.8656 51.8806 31.3132 51.2952 33.8673L44.3248 32.1113C44.5377 30.6215 44.2184 29.3445 43.3671 28.2271C42.5157 27.1097 41.2919 26.3115 39.536 25.8859C37.9397 25.5134 36.6095 25.5134 35.4921 25.9391C34.3747 26.3647 33.6829 27.2161 33.3637 28.4399C33.1509 29.3445 33.2573 30.0894 33.6829 30.7279C34.1086 31.3664 34.8536 31.9517 35.8113 32.537C36.7691 33.1223 38.3122 33.8673 40.3873 34.825C42.5157 35.7296 44.2716 36.7406 45.6018 37.7515Z"
                                fill="black" />
                            <path
                                d="M49.2191 139.062C54.6997 138.264 59.861 141.989 60.7123 147.522L65.2351 175.777L73.9083 174.393L79.9209 173.435L79.2292 169.072L78.0054 169.285C75.3449 169.711 72.8441 167.902 72.4184 165.241L69.2791 145.767C67.736 136.029 58.5308 129.378 48.7402 130.921L49.2191 139.062Z"
                                fill="black" />
                            <path
                                d="M49.38 139.062L48.3158 130.974C38.4189 130.974 30.4375 139.009 30.4375 148.852V177.798H39.217H45.3361V173.382H44.0591C41.3986 173.382 39.217 171.2 39.217 168.54V149.225C39.217 143.638 43.7398 139.062 49.38 139.062Z"
                                fill="black" />
                            <path
                                d="M83.0605 173.542H84.3376C86.998 173.542 89.1796 171.36 89.1796 168.7V149.012C89.1796 139.115 97.2142 131.134 107.058 131.134H109.186C119.083 131.134 127.065 139.168 127.065 149.012V177.958H118.285H112.166V173.542H113.443C116.104 173.542 118.285 171.36 118.285 168.7V149.385C118.285 143.798 113.709 139.222 108.122 139.222C102.535 139.222 97.9592 143.798 97.9592 149.385V177.958H89.1796H83.0605V173.542Z"
                                fill="black" />
                            <path
                                d="M139.835 80.0527L111.953 71.5392C104.078 69.1448 95.6712 73.6144 93.2768 81.4894L84.7633 109.371C82.3689 117.246 86.8385 125.653 94.7135 128.048L122.595 136.561C130.47 138.955 138.877 134.486 141.272 126.611L149.785 98.7292C152.18 90.8542 147.71 82.4471 139.835 80.0527Z"
                                stroke="black" stroke-width="8.5135" stroke-miterlimit="10" />
                            <path
                                d="M104.61 102.294C102.588 108.999 106.313 116.076 113.017 118.098C119.722 120.12 126.799 116.395 128.82 109.691"
                                stroke="black" stroke-width="8.5135" stroke-miterlimit="10" />
                        </g>
                        <defs>
                            <clipPath id="clip0_2599_15296">
                                <rect width="154.36" height="177.4" fill="white"
                                    transform="translate(0.320312 0.558105)" />
                            </clipPath>
                        </defs>
                    </svg>
                </div>
            </div>
        </div>


        <!-- Card + botones + imagen -->
        <div class="mt-auto w-full flex flex-col items-center">
            <!-- Botones informativos -->
            <div class="flex flex-col gap-4 w-full max-w-64">
                <Button label="¿Por qué invertir con nosotros?" severity="contrast" class="w-full justify-center"
                    rounded />
                <Button label="Preguntas frecuentes" class="w-full justify-center text-black" severity="contrast"
                    rounded />
            </div>
        </div>
    </div>
</template>
